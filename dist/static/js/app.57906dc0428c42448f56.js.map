{"version":3,"sources":["webpack:///./src/custom-aframe-components/terrain.js","webpack:///./src/App.vue?5975","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/GameWorld.vue","webpack:///./src/components/GameWorld.vue?5726","webpack:///./src/components/GameWorld.vue","webpack:///./src/router/index.js","webpack:///./helpers/vue-aframe.js","webpack:///./src/main.js"],"names":["Terrain","detail","this","size","Math","pow","max","map","Float32Array","getColor","value","rgb","prototype","setMap","get","x","y","set","val","generate","roughness","that","average","values","valid","filter","reduce","sum","length","square","offset","ave","diamond","divide","half","scale","random","getAverageHeight","a","b","getMinHeight","minHeight","Infinity","forEach","height","getMaxHeight","maxHeight","_toMesh","width","increments","wireframe","color","geometry","THREE","PlaneGeometry","increment","floor","vertices","z","averageHeight","vertex","createTexture","material","MeshBasicMaterial","mesh","Mesh","rotation","PI","receiveShadow","castShadow","position","toShadedMesh","toWireframeMesh","canvas","document","createElement","ctx","getContext","fillStyle","fillRect","CanvasTexture","AFRAME","registerComponent","schema","type","default","sharpness","init","update","data","terrain","el","raycaster","Raycaster","Vector3","interations","intersectObject","setObject3D","tick","time","timeDelta","remove","pause","play","registerPrimitive","defaultComponents","mappings","selectortype_template_index_0_src_App","render","_h","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","GameWorld","msg","loaded","FileLoader","text","mounted","_this","setTimeout","components_GameWorld","_vm","staticClass","_e","_m","_v","antialias","effects","film","outline","colors","bloom","fxaa","godrays","glitch","src","autoplay","loop","particle-system","light","data-v-35fb1ec0","attribute","dur","direction","to","repeat","on","$event","_k","keyCode","undefined","key","loadingHandler","mtl","from","src_components_GameWorld","GameWorld_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","path","component","vue_aframe","[object Object]","Vue","options","mixin","config","productionTip","ignoredElements","components","App","template"],"mappings":"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","file":"static/js/app.57906dc0428c42448f56.js","sourcesContent":["'use strict';\r\n\r\nfunction Terrain(detail) {\r\n  this.size = Math.pow(2, detail) + 1;\r\n  this.max = this.size - 1;\r\n  this.map = new Float32Array(this.size * this.size);\r\n}\r\n\r\nTerrain.prototype.setMap = function(map) {\r\n  this.map = map;\r\n};\r\n\r\nTerrain.prototype.get = function(x, y) {\r\n  if (x < 0 || x > this.max || y < 0 || y > this.max) {\r\n    return -1;\r\n  }\r\n\r\n  return this.map[x + this.size * y];\r\n};\r\n\r\nTerrain.prototype.set = function(x, y, val) {\r\n  this.map[x + this.size * y] = val;\r\n};\r\n\r\nTerrain.prototype.generate = function(roughness) {\r\n  var that = this;\r\n\r\n  this.set(0, 0, that.max);\r\n  this.set(this.max, 0, that.max / 2);\r\n  this.set(this.max, this.max, 0);\r\n  this.set(0, this.max, that.max / 2);\r\n\r\n  divide(this.max);\r\n\r\n  function divide(size) {\r\n    var x, y, half = size / 2;\r\n    var scale = roughness * size;\r\n\r\n    if (half < 1) { return; }\r\n\r\n    for (y = half; y < that.max; y += size) {\r\n      for (x = half; x < that.max; x += size) {\r\n        square(x, y, half, Math.random() * scale * 2 - scale);\r\n      }\r\n    }\r\n\r\n    for (y = 0; y <= that.max; y += half) {\r\n      for (x = (y + half) % size; x <= that.max; x += size) {\r\n        diamond(x, y, half, Math.random() * scale * 2 - scale);\r\n      }\r\n    }\r\n\r\n    divide(size / 2);\r\n  }\r\n\r\n  function average(values) {\r\n    var valid = values.filter(function(val) {\r\n      return val !== -1;\r\n    });\r\n\r\n    var total = valid.reduce(function(sum, val) {\r\n      return sum + val;\r\n    }, 0);\r\n\r\n    return total / valid.length;\r\n  }\r\n\r\n  function square(x, y, size, offset) {\r\n    var ave = average([\r\n      that.get(x - size, y - size),   // upper left\r\n      that.get(x + size, y - size),   // upper right\r\n      that.get(x + size, y + size),   // lower right\r\n      that.get(x - size, y + size)    // lower left\r\n    ]);\r\n\r\n    that.set(x, y, ave + offset);\r\n  }\r\n\r\n  function diamond(x, y, size, offset) {\r\n    var ave = average([\r\n      that.get(x, y - size),      // top\r\n      that.get(x + size, y),      // right\r\n      that.get(x, y + size),      // bottom\r\n      that.get(x - size, y)       // left\r\n    ]);\r\n\r\n    that.set(x, y, ave + offset);\r\n  }\r\n};\r\n\r\nTerrain.prototype.getAverageHeight = function() {\r\n  return this.map.reduce(function(a, b) {\r\n    return a + b;\r\n  }, 0) / this.map.length;\r\n};\r\n\r\nTerrain.prototype.getMinHeight = function() {\r\n  var minHeight = Infinity;\r\n\r\n  this.map.forEach(function(height) {\r\n    if (height < minHeight) {\r\n      minHeight = height;\r\n    }\r\n  });\r\n\r\n  return minHeight;\r\n};\r\n\r\nTerrain.prototype.getMaxHeight = function() {\r\n  var maxHeight = -Infinity;\r\n\r\n  this.map.forEach(function(height) {\r\n    if (height > maxHeight) {\r\n      maxHeight = height;\r\n    }\r\n  });\r\n\r\n  return maxHeight;\r\n};\r\n\r\nTerrain.prototype._toMesh = function(width, increments, wireframe, color) {\r\n  var geometry = new THREE.PlaneGeometry(width, width, increments - 1, increments - 1);\r\n\r\n  var increment = width / increments;\r\n\r\n  var minHeight = Infinity;\r\n  var maxHeight = -Infinity;\r\n\r\n  for (var y = 0; y < increments; y++) {\r\n    for (var x = 0; x < increments; x++) {\r\n\r\n      var height = this.get(Math.floor(x * increment * this.size / width),\r\n        Math.floor(y * increment * this.size / width));\r\n\r\n      if (height < minHeight) { minHeight = height; }\r\n\r\n      if (height > maxHeight) { maxHeight = height; }\r\n\r\n      if (height < 0) { height = 0; }\r\n\r\n      if (y === 0 || y === increments - 1 || x === 0 || x === increments - 1) {\r\n        height = 0;\r\n      }\r\n\r\n      geometry.vertices[y * increments + x].z = height;\r\n    }\r\n  }\r\n\r\n  var averageHeight = (maxHeight - minHeight) / 4;\r\n\r\n  geometry.vertices.forEach(function(vertex) {\r\n    vertex.z -= averageHeight;\r\n  });\r\n\r\n  // geometry.computeFaceNormals();\r\n  // geometry.computeFlatVertexNormals()\r\n  // geometry.computeVertexNormals();\r\n\r\n  var texture = this.createTexture(width, increments);\r\n\r\n  var material = new THREE.MeshBasicMaterial({\r\n    color: color || 0xEF2D5E,\r\n    wireframe: true,\r\n  });\r\n\r\n  var mesh = new THREE.Mesh(geometry, material);\r\n  mesh.rotation.x = -Math.PI / 2;\r\n\r\n  mesh.receiveShadow = true;\r\n  mesh.castShadow = true;\r\n\r\n  mesh.position.y -= this.getMinHeight();\r\n\r\n  return mesh;\r\n};\r\n\r\nTerrain.prototype.toShadedMesh = function (width, increments, color) {\r\n  return this._toMesh(width, increments, false, color);\r\n};\r\n\r\nTerrain.prototype.toWireframeMesh = function (width, increments, color) {\r\n  return this._toMesh(width, increments, true, color);\r\n};\r\n\r\nTerrain.prototype.createTexture = function (width, increments) {\r\n  var canvas = document.createElement('canvas');\r\n  canvas.width = width;\r\n  canvas.height = width;\r\n\r\n  var increment = width / increments;\r\n\r\n  var ctx = canvas.getContext('2d');\r\n\r\n  var minHeight = this.getMinHeight();\r\n  var maxHeight = this.getMaxHeight();\r\n\r\n  for (var y = 0; y < increments; y++) {\r\n    for (var x = 0; x < increments; x++) {\r\n\r\n      var height = this.get(Math.floor(x * increment * this.size / width),\r\n        Math.floor(y * increment * this.size / width));\r\n\r\n      ctx.fillStyle = getColor(height);\r\n      ctx.fillRect(x * increment, y * increment, increment, increment);\r\n    }\r\n  }\r\n\r\n  return new THREE.CanvasTexture(canvas);\r\n};\r\n\r\nfunction getColor(value) {\r\n\r\n  // Deep Ocean\r\n  var rgb = [181, 186, 136];\r\n\r\n  // Sand\r\n  if (value >= 200) {\r\n    rgb = [244, 255, 148];\r\n  }\r\n\r\n  // Light Grass\r\n  if (value >= 260) {\r\n    rgb = [48, 140, 48];\r\n  }\r\n\r\n  // Dark Grass\r\n  if (value >= 280) {\r\n    rgb = [54, 117, 43];\r\n  }\r\n\r\n  // Rock\r\n  if (value >= 300) {\r\n    rgb = [99, 99, 99];\r\n  }\r\n\r\n  // Snow\r\n  if (value >= 360) {\r\n    rgb = [240, 240, 240];\r\n  }\r\n\r\n  var color = 'rgb(' + rgb[0] + ', ' + rgb[1] + ', ' + rgb[2] + ')';\r\n\r\n  return color;\r\n}\r\n\r\nAFRAME.registerComponent('terrain', {\r\n  schema: {\r\n    detail: { type: 'int', default: 5 },\r\n    sharpness: { type: 'number', default: 0.5 },\r\n    width: { type: 'int', default: 100 },\r\n    increments: { type: 'int', default: 20 },\r\n    color: { type: 'color', default: '#ff0' }\r\n  },\r\n  init: function () {},\r\n  update: function () {\r\n    var data = this.data,\r\n        el = this.el;\r\n\r\n    var terrain = new Terrain(data.detail);\r\n\r\n\r\n\r\n\r\n\r\n    terrain.generate(data.sharpness);\r\n\r\n    var mesh = terrain.toWireframeMesh(data.width, data.increments, data.color);\r\n\r\n    var raycaster = new THREE.Raycaster();\r\n    raycaster.set(new THREE.Vector3(0, -10, 0), new THREE.Vector3(0, 1, 0), 0, 1000);\r\n\r\n    var interations = 0,\r\n        maxIterations = 50;\r\n\r\n    while(raycaster.intersectObject(mesh).length && interations < maxIterations) {\r\n      terrain.generate(data.sharpness);\r\n\r\n      mesh = terrain.toWireframeMesh(data.width, data.increments, data.color);\r\n\r\n      interations++;\r\n    }\r\n\r\n    this.el.setObject3D('mesh', mesh);\r\n  },\r\n  tick: function (time, timeDelta) {\r\n\r\n\r\n    \r\n \r\n  },\r\n  remove: function () {},\r\n  pause: function () {},\r\n  play: function () {}\r\n});\r\n\r\nAFRAME.registerPrimitive('a-terrain', {\r\n  defaultComponents: {\r\n    terrain: {}\r\n  },\r\n  mappings: {\r\n    detail: 'terrain.detail',\r\n    sharpness: 'terrain.sharpness',\r\n    width: 'terrain.width',\r\n    increments: 'terrain.increments',\r\n    color: 'terrain.color'\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/custom-aframe-components/terrain.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e232033\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e232033\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e232033\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style>\n#app {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <div class=\"hello\">\n    <template v-if=\"!loaded\">\n    <div class=\"overlay\">\n\n      <h1 class=\"center\">\n\n        Loading...\n        </h1>\n      </div>\n\n      </template>\n        <!-- <a-scene style=\"z-index: 1\" > -->\n\n    <!-- <a-scene stats> -->\n    <a-scene antialias=\"true\"\n            effects=\" glitch, godrays, fxaa\"\n             film=\"sIntensity: 0.5; nIntensity: 0.7\"\n              outline=\"enabled: false; width: 1.33 1.33; range: 0 10; strength: 3; smooth: true;\"\n               colors=\"mode:hqprtom; mul: 0.66 0.5 0.66; pow: 1 1.33 1.66; quant: 0.3 0.3 0.1; orig: 0.33 0.66 0.66\"\n             bloom=\"filter: bloom!, bloom.filter, #customFilter(bloom_texture 0.3 0.6 0.5); strength: 0.5; radius:1.2\"\n             fxaa=\"true\" godrays=\"src: #sun; threshold: 0. 0.63; intensity: 1\"\n             glitch=\"true\">\n      <a-assets>\n        <a-asset-item id=\"tree-obj\" src=\"static/models/trees/trees-lo-poly.obj\"></a-asset-item>\n        <a-asset-item id=\"tree-mtl\" src=\"static/models/trees/trees-lo-poly.obj\"></a-asset-item>\n      </a-assets>\n  \n      <a-sound src=\"src: url(static/music/loop1.mp3)\" autoplay=\"true\" loop=\"true\" position=\"0 2 5\"></a-sound>\n  \n  \n  \n      <a-entity position=\"0 -30 0\" particle-system=\"preset: dust; particle-count: 10000\"></a-entity>\n      <a-entity light=\"type:ambient;intensity:0.26000000000000003\"></a-entity>\n      <a-text data-v-35fb1ec0=\"\" :value=\"text\" position=\"-1.0805017097797602 2.6480193483709424 -1.6184556424294714\">\n        <!-- <a-animation -->\n      </a-text>\n\n      <a-entity id=\"sun\" geometry=\"primitive: sphere; radius: 40;\" material=\"shader: flat; transparent: true; color: #aaaaaa\" light=\"type: directional; color: #FFF; intensity: 0.7\" position=\"500 423 420\">\n        <a-animation attribute=\"position\" dur=\"40000\" direction=\"alternate\" to=\"500 600 -1000\" repeat=\"indefinite\"></a-animation>\n      </a-entity>\n  \n\n  <!-- Wireframe terrain -->\n      <a-terrain position=\"0 -50 0\" wireframe=\"true\" width=\"1000\" increments=\"300\" detail=\"7\" sharpness=\"0.13\" color=\"#999999\"></a-terrain>\n\n\n      <!-- TREES -->\n      <a-entity v-on:el.hasLoaded=\"loadingHandler\" id=\"trees\" position=\"12 0 -2\">\n\n      <a-obj-model data-v-35fb1ec0=\"\" src=\"#tree-obj\" mtl=\"#tree-mtl\" material=\"\" scale=\"0.001 0.001 0.001\">\n        <a-animation attribute=\"scale\" dur=\"40000\" direction=\"alternate\" from=\"0.003 0 0.003\" to=\"0.003 0.003 0.003\" repeat=\"indefinite\">\n        </a-animation>\n      </a-obj-model>\n\n      </a-entity>\n\n      <a-obj-model position=\"17 -10 5\" data-v-35fb1ec0=\"\" src=\"#tree-obj\" mtl=\"#tree-mtl\" material=\"\" scale=\"0.001 0.001 0.001\">\n        <a-animation attribute=\"scale\" dur=\"40000\" direction=\"alternate\" from=\"0.004 0 0.004\" to=\"0.004 0.004 0.004\" repeat=\"indefinite\">\n        </a-animation>\n      </a-obj-model>\n      <!--\n      <a-obj-model position=\"266 -10 1\" data-v-35fb1ec0=\"\" src=\"#tree-obj\" mtl=\"#tree-mtl\" material=\"\" scale=\"0.001 0.001 0.001\">\n        <a-animation attribute=\"scale\" dur=\"40000\" direction=\"alternate\" from=\"0.04 0 0.04\" to=\"0.04 0.04 0.04\" repeat=\"indefinite\">\n        </a-animation>\n      </a-obj-model> -->\n      <!-- Sky -->\n      <a-sky color=\"black\"></a-sky>\n  \n    </a-scene>\n  </div>\n</template>\n\n<script>\n\n  export default {\n    name: 'GameWorld',\n    data() {\n      return {\n        msg: '',\n        loaded: false,\n        FileLoader: null,\n        text: \"What if the whole world,\"\n      }\n    }, \n\n    mounted() {\n\n      setTimeout(() => { this.loaded = true }, 10000);\n      setTimeout(() => { this.text = 'stood still for 1 day?' }, 15000);\n      setTimeout(() => { this.text = '' }, 20000);\n\n    },\n\n   \n   \n  }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  h1,\n  h2 {\n    font-weight: normal;\n  }\n  \n  ul {\n    list-style-type: none;\n    padding: 0;\n  }\n  \n  li {\n    display: inline-block;\n    margin: 0 10px;\n  }\n  \n  a {\n    color: #42b983;\n  }\n\n  .overlay {\n    width: 100%;\n    height: 100%;\n    background: rgba(0.0,0.0,0.0,0.8);\n    z-index: 10;\n    position: absolute;\n    top:0;\n    left:0;\n  }\n\n  .center {\n    margin: 300px auto;\n    color: white;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/GameWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[(!_vm.loaded)?[_vm._m(0)]:_vm._e(),_vm._v(\" \"),_c('a-scene',{attrs:{\"antialias\":\"true\",\"effects\":\" glitch, godrays, fxaa\",\"film\":\"sIntensity: 0.5; nIntensity: 0.7\",\"outline\":\"enabled: false; width: 1.33 1.33; range: 0 10; strength: 3; smooth: true;\",\"colors\":\"mode:hqprtom; mul: 0.66 0.5 0.66; pow: 1 1.33 1.66; quant: 0.3 0.3 0.1; orig: 0.33 0.66 0.66\",\"bloom\":\"filter: bloom!, bloom.filter, #customFilter(bloom_texture 0.3 0.6 0.5); strength: 0.5; radius:1.2\",\"fxaa\":\"true\",\"godrays\":\"src: #sun; threshold: 0. 0.63; intensity: 1\",\"glitch\":\"true\"}},[_c('a-assets',[_c('a-asset-item',{attrs:{\"id\":\"tree-obj\",\"src\":\"static/models/trees/trees-lo-poly.obj\"}}),_vm._v(\" \"),_c('a-asset-item',{attrs:{\"id\":\"tree-mtl\",\"src\":\"static/models/trees/trees-lo-poly.obj\"}})],1),_vm._v(\" \"),_c('a-sound',{attrs:{\"src\":\"src: url(static/music/loop1.mp3)\",\"autoplay\":\"true\",\"loop\":\"true\",\"position\":\"0 2 5\"}}),_vm._v(\" \"),_c('a-entity',{attrs:{\"position\":\"0 -30 0\",\"particle-system\":\"preset: dust; particle-count: 10000\"}}),_vm._v(\" \"),_c('a-entity',{attrs:{\"light\":\"type:ambient;intensity:0.26000000000000003\"}}),_vm._v(\" \"),_c('a-text',{attrs:{\"data-v-35fb1ec0\":\"\",\"value\":_vm.text,\"position\":\"-1.0805017097797602 2.6480193483709424 -1.6184556424294714\"}}),_vm._v(\" \"),_c('a-entity',{attrs:{\"id\":\"sun\",\"geometry\":\"primitive: sphere; radius: 40;\",\"material\":\"shader: flat; transparent: true; color: #aaaaaa\",\"light\":\"type: directional; color: #FFF; intensity: 0.7\",\"position\":\"500 423 420\"}},[_c('a-animation',{attrs:{\"attribute\":\"position\",\"dur\":\"40000\",\"direction\":\"alternate\",\"to\":\"500 600 -1000\",\"repeat\":\"indefinite\"}})],1),_vm._v(\" \"),_c('a-terrain',{attrs:{\"position\":\"0 -50 0\",\"wireframe\":\"true\",\"width\":\"1000\",\"increments\":\"300\",\"detail\":\"7\",\"sharpness\":\"0.13\",\"color\":\"#999999\"}}),_vm._v(\" \"),_c('a-entity',{attrs:{\"id\":\"trees\",\"position\":\"12 0 -2\"},on:{\"el\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"hasLoaded\",undefined,$event.key,undefined)){ return null; }return _vm.loadingHandler($event)}}},[_c('a-obj-model',{attrs:{\"data-v-35fb1ec0\":\"\",\"src\":\"#tree-obj\",\"mtl\":\"#tree-mtl\",\"material\":\"\",\"scale\":\"0.001 0.001 0.001\"}},[_c('a-animation',{attrs:{\"attribute\":\"scale\",\"dur\":\"40000\",\"direction\":\"alternate\",\"from\":\"0.003 0 0.003\",\"to\":\"0.003 0.003 0.003\",\"repeat\":\"indefinite\"}})],1)],1),_vm._v(\" \"),_c('a-obj-model',{attrs:{\"position\":\"17 -10 5\",\"data-v-35fb1ec0\":\"\",\"src\":\"#tree-obj\",\"mtl\":\"#tree-mtl\",\"material\":\"\",\"scale\":\"0.001 0.001 0.001\"}},[_c('a-animation',{attrs:{\"attribute\":\"scale\",\"dur\":\"40000\",\"direction\":\"alternate\",\"from\":\"0.004 0 0.004\",\"to\":\"0.004 0.004 0.004\",\"repeat\":\"indefinite\"}})],1),_vm._v(\" \"),_c('a-sky',{attrs:{\"color\":\"black\"}})],1)],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlay\"},[_c('h1',{staticClass:\"center\"},[_vm._v(\"\\n\\n      Loading...\\n      \")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d672db6e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/GameWorld.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d672db6e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./GameWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameWorld.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./GameWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d672db6e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./GameWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d672db6e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/GameWorld.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport GameWorld from '@/components/GameWorld'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'GameWorld',\n      component: GameWorld\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import aframe from 'aframe'\nimport Enviroment from 'aframe-environment-component'\nimport \"aframe-mouse-cursor-component\"\n// This is your plugin object. It can be exported to be used anywhere.\nconst AFramePlugin = {\n    // The install method is all that needs to exist on the plugin object.\n    // It takes the global Vue object as well as user-defined options.\n    install(Vue, options) {\n      // We call Vue.mixin() here to inject functionality into all components.\n        Vue.mixin({\n        // Anything added to a mixin will be injected into all components.\n        // In this case, the mounted() method runs when the component is added to the DOM.\n        mounted() {\n         \n        }\n      });\n    }\n  };\n  \n  export default AFramePlugin;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./helpers/vue-aframe.js\n// module id = null\n// module chunks = ","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport VueAframe from '../helpers/vue-aframe'\nimport 'aframe-terrain-model-component'\nimport 'aframe-effects'\nimport 'aframe-particle-system-component'\n\nimport './custom-aframe-components/terrain'\n// import './custom-aframe-components/wat'\n\nVue.use(VueAframe);\nVue.config.productionTip = false\nVue.config.ignoredElements = [\n  'a-scene',\n  'a-entity',\n  'a-camera',\n  'a-box'\n]\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}